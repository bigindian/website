form.chipsdemoCustomInputs(name="form", ng-submit="onSubmit()")
  md-card
    md-card-content
      h1 Submit a Story
      p Stories must be relevant to startups in India. You don't need to be logged in for this.

      div(layout="row")
        md-input-container(flex)
          label URL
          input(ng-model="story.url" required type="url" maxlength="500")
          .hint The link to the story

      div(layout="row")
        md-input-container(flex)
          label Title
          input(ng-model="story.title" required type="text" minlength="10" maxlength="300")
          .hint The title of the story (min 20 characters)
        div
          md-progress-circular(md-mode="indeterminate" ng-if="fetchingTitle")
          md-button.md-raised.md-primary(ng-click="getTitle()" ng-if="!story.title && !fetchingTitle") Fetch title

      //- md-chips(ng-model="selected_tags"
        ng-required
        md-autocomplete-snap=""
        md-require-match="true")

        md-autocomplete(md-selected-item="selectedItem"
          md-search-text="searchText"
          md-items="item in querySearch(searchText)"
          md-item-text="item.name"
          ng-disabled="selected_tags.length >= 3"
          md-menu-class="autocomplete-submit-template"
          placeholder="Type and choose any 3 tags")

          md-item-template
            .autocomplete-submit-item
              .title {{item.tag}}
              .desc {{item.description}}

        md-chip-template
          span
            strong {{ $chip.tag }}

      google-recaptcha(ng-model="story.recaptcha" ng-required ng-if="!story.recaptcha")

      md-button.md-raised.md-primary(ng-disabled="!form.$valid || form.loading" ng-if="!form.loading" ng-click="onSubmit()") Submit

      md-progress-circular(md-mode="indeterminate" ng-if="form.loading")
//- .row
//-   .columns
//-     h3 Submit your link

//- form.row(name="form"
//-   ng-class="formClasses"
//-   accept-charset="UTF-8")

//-   .columns
//-     .row
//-       .columns.medium-2
//-         label URL *
//-       .columns(class="{{ urlValid ? "medium-10" : "medium-8" }}")
//-         input(ng-model="data.story.$attributes.url"
//-           ng-disabled="formLoading"
//-           type="url"
//-           required)

//-       .columns.medium-2(ng-if="!urlValid")
//-         button(ng-click="checkURL()") Submit

//-   .columns(ng-if="urlValid")
//-     .row
//-       .columns.medium-2
//-         label Title *
//-       .columns.medium-10
//-         input.title.field(ng-model="data.story.$attributes.title"
//-           type="text"
//-           ng-disabled="formLoading"
//-           minlength="10"
//-           maxlength="255"
//-           required)

//-   .columns(ng-if="urlValid")
//-     .row
//-       .columns.medium-2
//-         label Excerpt
//-       .columns.medium-10.excerpt {{ data.story.$attributes.excerpt }} . . .

//-   .columns(ng-if="urlValid")
//-     .row
//-       .columns.medium-2
//-         label Categories *
//-         .hint Choose upto 3 categories
//-       .columns.medium-10
//-         news-category(ng-model="cat"
//-           disable-href="true"
//-           ng-class="{selected: isCatActive(cat)}"
//-           ng-repeat="cat in categories | orderBy : "slug""
//-           ng-click="toggleCat(cat)")



//-   .columns(ng-if="urlValid")
//-     .row
//-       .columns.medium-2
//-         label Description
//-       .columns.medium-10
//-         textarea(maxlength="3000"
//-           ng-model="story.description_markdown"
//-           placeholder="type using Markdown! See below for help..."
//-           ng-disabled="formLoading")
//-       .columns.medium-10(ng-if="!form.showMarkdown")
//-         a.markdown(ng-click="form.showMarkdown = true") formatting help

//-       .columns.medium-10(ng-if="form.showMarkdown")
//-         .markdown_help
//-           table
//-             tr
//-               td(width="125")
//-                 em emphasized text
//-               td surround text with <tt>*asterisks*</tt>
//-             tr
//-               td
//-                 strong strong text
//-               td surround text with <tt>**two asterisks**</tt>
//-             tr
//-               td
//-                 strike struck-through
//-               td surround text with <tt>~~two tilde characters~~</tt>
//-             tr
//-               td
//-                 tt fixed width
//-               td surround text with <tt>&grave;backticks&grave;</tt>
//-             tr
//-               td
//-                 a(href="http://example.com/") linked text
//-               td.
//-                 <tt>[linked text](http://example.com/)</tt> or just a bare URL to
//-                 create without a title
//-             tr
//-               td
//-                 blockquote quoted text
//-               td prefix text with <tt>&gt;</tt>

//-             //- tr
//-               td
//-                 pre(style="margin: 0px;").
//-                   pre
//-                     text
//-               td
//-                 | prefix text with at least
//-                 tt &nbsp;&nbsp;&nbsp;&nbsp;4 spaces
//-             //- tr
//-               td (inline image)

//-               td
//-                 tt ![alt text](http://example.com/image.jpg) (only allowed in link text)

//-   .columns
//-     .row
//-       a.guidlines.columns.small-6(ng-click="form.showGuidlines = !form.showGuidlines")
//-         span Submission guidlines

//-   .columns(ng-if="form.showGuidlines")
//-     ul
//-       //- li
//-         p
//-           | To be able to easily submit a page you"re viewing in your browser
//-           | to Example News, drag the bookmarklet to the righ-t
//-           | to your bookmark bar.  You"ll be taken to this page with the viewed
//-           | page"s URL and title.

//-       li
//-         p.
//-           When submitting a URL, the text field is optional and should only
//-           be used when additional context or explanation of the URL is
//-           needed. Commentary or opinion should be reserved for a comment,
//-           so that it can be voted separately from the story.

//-       li
//-         p.
//-           Do not editorialize link titles, but when the original link"s
//-           title has no context or is unclear, please change it.  <strong>Please
//-           remove unwanted components from titles such as the name of the
//-           site or section.</strong>

//-       li
//-         p.
//-           If no tags clearly apply to the link you are submitting, chances
//-           are it does not belong here.  Do not overreach with tags if they
//-           are not the primary focus of the link.

//-       li
//-         p.
//-           When the link being submitted is more than a year or so old,
//-           please add the year the link was written to the post title in
//-           parentheses.

//-       li
//-         p.
//-           You cannot change the URL or the categories of the story once you
//-           submit it, so make sure to double-check. You can however change the
//-           title and description even after you"ve submitted the link.

//-   .columns(ng-if="urlValid")
//-     div(google-recaptcha, ng-model="data.story.gcaptcha", ng-if="!data.story.gcaptcha")
//-     button(ng-click="submit(data.story)", ng-if="data.story.gcaptcha", ng-disabled="!form.$valid") Submit


//-   .preview.columns(ng-if="urlValid")
//-     .row
//-       .columns
//-         h3 Preview
//-       .columns
//-         news-item(ng-model="storyCopy")